{% extends 'base.html' %}

{% block title %}Конвертер регистра | MyToolBox{% endblock %}

{% block content %}
<div class="container mt-5">
    <form name="stringForm" method="post" onsubmit="fn(event)">
        {% csrf_token %}

        <div class="mb-3">
            <label class="form-label">Введите текст:</label>
            <input type="text" name="string" class="form-control" required>
        </div>

        <div class="mb-3">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="register" id="up" value="up" required>
                <label class="form-check-label" for="up">ВЕРХНИЙ РЕГИСТР</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="register" id="low" value="low">
                <label class="form-check-label" for="low">нижний регистр</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="register" id="capitalize" value="capitalize">
                <label class="form-check-label" for="capitalize">Первая буква заглавная</label>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Конвертировать</button>
    </form>
</div>

<script>
function fn(event) {
    event.preventDefault();
    const form = event.target;
    let str = form.string.value;
    const choice = form.register.value;

    switch(choice) {
        case "up": str = str.toUpperCase(); break;
        case "low": str = str.toLowerCase(); break;
        case "capitalize":
            str = str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            break;
    }

    let resultDiv = document.getElementById("result");
    if (!resultDiv) {
        resultDiv = document.createElement("div");
        resultDiv.id = "result";
        resultDiv.className = "mt-4 p-3 bg-light rounded";
        form.parentNode.insertBefore(resultDiv, form.nextSibling);
    }

    resultDiv.innerHTML = `
        <h4>Результат:</h4>
        <p class="mb-0">${str}</p>
    `;

    form.reset();
}
</script>
{% endblock %}